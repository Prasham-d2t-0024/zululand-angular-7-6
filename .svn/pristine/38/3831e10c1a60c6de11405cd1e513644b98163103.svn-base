<div class="container mt-4 tabViewContainer collections-container">
  <div class="row">
    <div class="col-lg-12">
      <ul ngbNav #nav="ngbNav" class="nav-tabs"  style="margin-bottom: 0px!important;">
        <li ngbNavItem>
          <a ngbNavLink class="h5">
            <i class="fas fa-inbox mr-2 fa-lg"></i>
            <span>{{'home.browse.repository' | translate}}</span>
          </a>
          <ng-template ngbNavContent>
            <div class="container bg-white tabViewContents collectionsTabContent">
              <div *ngVar="(collectionRD$ | async) as collectionRD">
                <div *ngIf="collectionRD?.hasSucceeded" @fadeInOut>
                  <div *ngIf="collectionRD?.payload as collection">
                    <ds-view-tracker [object]="collection"></ds-view-tracker>
                    <section class="row border-bottom mb-4">
                      <div class="col-12 col-sm-3">
                        <!-- Community logo -->
                        <ds-comcol-page-logo
                          *ngIf="logoRD$"
                          [logo]="(logoRD$ | async)?.payload"
                          [alternateText]="'Collection Logo'"
                        >
                        </ds-comcol-page-logo>
                      </div>
                      <div class="col-12 d-flex  col-sm-9">
                        <header class="comcol-header mr-auto">
                          <!-- Collection Name -->
                          <ds-comcol-page-header
                            [name]="dsoNameService.getName(collection)"
                          >
                          </ds-comcol-page-header>
                          <!-- Collection logo -->
                          <!-- <ds-comcol-page-logo *ngIf="logoRD$" [logo]="(logoRD$ | async)?.payload" [alternateText]="'Collection Logo'">
                                                                                                                                        </ds-comcol-page-logo> -->

                          <!-- Handle -->
                          <ds-themed-comcol-page-handle
                            [content]="collection.handle"
                            [title]="'collection.page.handle'"
                          >
                          </ds-themed-comcol-page-handle>
                          <!-- Introductory text -->
                          <ds-comcol-page-content
                            [content]="collection.introductoryText"
                            [hasInnerHtml]="true"
                          >
                          </ds-comcol-page-content>
                          <!-- News -->
                          <ds-comcol-page-content
                            [content]="collection.sidebarText"
                            [hasInnerHtml]="true"
                            [title]="'collection.page.news'"
                          >
                          </ds-comcol-page-content>
                        </header>
                        <ds-dso-edit-menu></ds-dso-edit-menu>
                        <div class="pl-2 space-children-mr">
                          <ds-dso-page-subscription-button
                            [dso]="collection"
                          ></ds-dso-page-subscription-button>
                        </div>
                      </div>
                    </section>
                    <section class="comcol-page-browse-section">
                      <!-- Browse-By Links -->
                      <ds-themed-comcol-page-browse-by
                        [id]="collection.id"
                        [contentType]="collection.type"
                      >
                      </ds-themed-comcol-page-browse-by>
                      <ds-configuration-search-page
                        [showScopeSelector]="false"
                      ></ds-configuration-search-page>
                    </section>
                    <footer
                      *ngIf="collection.copyrightText"
                      class="border-top my-5 pt-4"
                    >
                      <!-- Copyright -->
                      <ds-comcol-page-content
                        [content]="collection.copyrightText"
                        [hasInnerHtml]="true"
                      >
                      </ds-comcol-page-content>
                    </footer>
                  </div>
                </div>
                <ds-error
                  *ngIf="collectionRD?.hasFailed"
                  message="{{'error.collection' | translate}}"
                ></ds-error>
                <ds-themed-loading
                  *ngIf="collectionRD?.isLoading"
                  message="{{'loading.collection' | translate}}"
                ></ds-themed-loading>
              </div>
            </div>
          </ng-template>
        </li>
        <li ngbNavItem>
          <a ngbNavLink class="h5"><i class="fas fa-chart-line mr-2 fa-lg"></i>{{'home.whats.trending' | translate}}</a>
          <ng-template ngbNavContent>

            <div class="chart-tabs" style="margin-top: 10px;">
              <ul ngbNav #nav="ngbNav" class="nav-tabs" style="margin-bottom: 0px!important;">
                <li ngbNavItem>
                  <a ngbNavLink><i class="fas fa-chart-line mr-2"></i>Trending Items</a>
                  <ng-template ngbNavContent>
                    <ng-container *ngIf="collectionId$ | async as collectionId">
                      <ds-home-trending-item [collectionorCommunityId]="collectionId"  type="collection"></ds-home-trending-item>
                    </ng-container>
                  </ng-template>
                </li>
                <li ngbNavItem>
                  <a ngbNavLink><i class="fas fa-chart-pie mr-2"></i>Trending Metrics</a>
                  <ng-template ngbNavContent>
                    <div class="trending-metrics">
                      <div class="row align-items-center"  style="margin-left: 0px;margin-right: 0px;">
                        <ng-container *ngIf="collectionId$ | async as collectionId">
                          <ds-home-treding-geolocation [collectionorCommunityId]="collectionId"  type="collection"></ds-home-treding-geolocation>
                        </ng-container>
                      </div>
                      <hr>
                      <div class="column-chart">
                        <ng-container *ngIf="collectionId$ | async as collectionId">
                          <ds-home-treding-searches [collectionorCommunityId]="collectionId"  type="collection"></ds-home-treding-searches>
                        </ng-container>
                      </div>
                      <hr>
                      <div class="column-chart">
                        <ng-container *ngIf="collectionId$ | async as collectionId">
                          <ds-home-treding-types [collectionorCommunityId]="collectionId"  type="collection"></ds-home-treding-types>
                        </ng-container>
                      </div>
                    </div>
                  </ng-template>
                </li>
              </ul>
              <div [ngbNavOutlet]="nav" class="bg-white"></div>
            </div>
  
          </ng-template>
        </li>
      </ul>
      <div [ngbNavOutlet]="nav"></div>
    </div>
  </div>
</div>
