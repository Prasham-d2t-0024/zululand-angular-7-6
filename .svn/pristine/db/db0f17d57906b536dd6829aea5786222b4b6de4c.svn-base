<div class="row mx-3 bg-white flex-column flex-md-row data-card">
    <div *ngIf="showThumbnails" class="col-12 col-md-2 p-1 img-col">
        <a *ngIf="linkType != linkTypes.None" [target]="(linkType == linkTypes.ExternalLink) ? '_blank' : '_self'"
            [attr.rel]="(linkType == linkTypes.ExternalLink) ? 'noopener noreferrer' : null"
            [routerLink]="[itemPageRoute]" class="dont-break-out">
            <ds-thumbnail [thumbnail]="dso?.thumbnail | async" [defaultImage]="'assets/images/orgunit-placeholder.svg'"
                [limitWidth]="true">
            </ds-thumbnail>
        </a>
        <span *ngIf="linkType == linkTypes.None" class="dont-break-out">
            <ds-thumbnail [thumbnail]="dso?.thumbnail | async" [defaultImage]="'assets/images/orgunit-placeholder.svg'"
                [limitWidth]="true">
            </ds-thumbnail>
        </span>
    </div>
    <div class="data-col p-2 p-md-1"
        [ngClass]="showThumbnails ? 'col-12 col-md-10 d-flex flex-column' : 'col-md-12 d-flex flex-column'">
        <div class="d-flex justify-content-between mb-2">
            <ds-themed-badges *ngIf="showLabel" [object]="dso" [context]="context" [showAccessStatus]="true">
            </ds-themed-badges>
            <!-- share mail link-->
            <div class="ml-auto d-flex text-secondary ">
                <div class="mt-auto pr-3" *ngIf="isAuthorized$ | async"><span>
                        <i [ngClass]="(bookmarkitem!=null && bookmarkitem.status==='active')?'fa':'far'"
                            [attr.title]="(bookmarkitem!=null && bookmarkitem.status==='active') ? 'Click here to UnBookmark this item' : 'Click here to Bookmark this item'"
                            class=" fa-bookmark element" aria-hidden="true" (click)="savebookmark()">
                        </i>
                    </span>
                </div>
                <div class="mt-auto pr-3" (click)="Citation(content)"><a target="_self">
                        <i class=" fa fa-quote-right  " aria-hidden="true">
                        </i>
                    </a>
                </div>
                <div class=" mt-auto pr-3">
                    <a target="_self" href="mailto:?subject={{dso.firstMetadataValue('dc.identifier.uri')}}"><i
                            class=" far fa-envelope  " aria-hidden="true"> </i></a>
                </div>
                <div ngbDropdown class="mt-auto">
                    <a type="button" class="arrowhide dropdown-toggle shareActions" id="dropdownBasic1"
                        ngbDropdownToggle aria-haspopup="true" aria-expanded="false">
                        <i class="fa fa-share-alt" aria-hidden="true"> </i>
                    </a>
                    <div class="listDropdown-left-menu" ngbDropdownMenu aria-labelledby="dropdownBasic1">
                        <a ngbDropdownItem calss=""
                            href="https://facebook.com/sharer/sharer.php?u={{dso.firstMetadataValue('dc.identifier.uri')}}">
                            <i class="fab fa-facebook-f facebookshare sharbutton"></i> <span
                                class="ml-2">Facebook</span>
                        </a>
                        <a ngbDropdownItem calss=""
                            href="https://twitter.com/share?url={{dso.firstMetadataValue('dc.identifier.uri')}}">
                            <i class="fab fa-twitter twittershare sharbutton"></i> <span class="ml-2">X</span>
                        </a>
                        <a ngbDropdownItem calss=""
                            href="whatsapp://send?text={{dso.firstMetadataValue('dc.identifier.uri')}}">
                            <i class="fab fa-whatsapp wahtsupshare sharbutton"></i> <span class="ml-2">WhatsApp</span>
                        </a>
                        <a ngbDropdownItem calss=""
                            href="https://www.linkedin.com/shareArticle?mini=true&url={{dso.firstMetadataValue('dc.identifier.uri')}}">
                            <i class="fab fa-linkedin linkshare sharbutton"></i> <span class="ml-2">LinkedIn</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <ds-truncatable [id]="dso.id" *ngIf="object !== undefined && object !== null">
            <div class="mb-2">
                <a *ngIf="linkType != linkTypes.None"
                    [target]="(linkType == linkTypes.ExternalLink) ? '_blank' : '_self'"
                    [attr.rel]="(linkType == linkTypes.ExternalLink) ? 'noopener noreferrer' : null"
                    [routerLink]="[itemPageRoute]" class="ellipsify-vertical line-3 item-list-title dont-break-out lead"
                    [innerHTML]="dsoTitle"></a>
            </div>
            <span *ngIf="linkType == linkTypes.None" class="item-list-title dont-break-out"
                [innerHTML]="dsoTitle"></span>
            <div class="mb-2">
                <span class="text-muted">
                    <ds-truncatable-part [id]="dso.id" [minLines]="1">

                        <span
                            *ngIf="dso.allMetadata(['dc.contributor.author', 'dc.creator', 'dc.contributor.*']).length > 0"
                            class="item-list-authors text-secondary ">
                            <i class="fa fa-user mr-2" aria-hidden="true"></i>
                            <span
                                *ngFor="let author of allMetadataValues(['dc.contributor.author', 'dc.creator', 'dc.contributor.*']); let last=last;">
                                <span [innerHTML]="author"><span [innerHTML]="author"></span></span>
                                <span *ngIf="!last">; </span>
                            </span>
                        </span>
                    </ds-truncatable-part>
                </span>
            </div>
        <div  class="mt-2" *ngIf="dso.firstMetadataValue('organization.emailID')" class="item-list-org-unit-description">
            <span class="item-list-org-unit-description">{{dso.firstMetadataValue('organization.emailID')}}</span>
        
        </div>
        <div  class="mt-2" *ngIf="dso.firstMetadataValue('organization.phone')" class="item-list-org-unit-description">
            <span class="item-list-org-unit-description">{{dso.firstMetadataValue('organization.phone')}}</span>
        
        </div>
        <div class="mt-2" *ngIf="dso.firstMetadataValue('organization.website')" class="item-list-org-unit-description">
            <a href="{{dso.firstMetadataValue('organization.website')}}"
                target="_blank">{{dso.firstMetadataValue('organization.website')}}</a>
        
        </div>
            <div class="mt-2">
                <a class="attachment-link text-secondary " (click)="getpdf()">
                    <i class="fa fa-paperclip"></i>
                    <span class="mx-2">Access Attachments</span>
                    <i class="fa fa-external-link-square animi-icon enlarge"></i>
                    <i class="fa fa-angle-right ml-2 animi-icon enlarge rotatefull skidleft"></i>
                </a>
            </div>

            <div class="mt-2" *ngIf="dso.firstMetadataValue('dc.bitstream.file')">
                <div class="pr-3 ">
                    <div ngbDropdown class="d-inline-block">
                        <a type="button" class="arrowhide dropdown-toggle" id="dropdownBasic1" ngbDropdownToggle
                            aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-paperclip"></i>
                            <span class="mx-2">Access External Attachments</span>
                            <i class="fa fa-external-link-square animi-icon enlarge"></i>
                            <i class="fa fa-angle-right ml-2 animi-icon enlarge rotatefull skidleft"></i>
                        </a>
                        <div ngbDropdownMenu aria-labelledby="dropdownBasic1">

                            <ng-container
                                *ngFor="let author of dso.allMetadataValues('dc.bitstream.file'); let last = last;">
                                <a ngbDropdownItem calss="" href="{{author}}" target="_blank">
                                    <span class="ml-3">External file</span>
                                </a>
                            </ng-container>


                        </div>
                    </div>
                </div>
            </div>
            <!-- <div *ngIf="dso.firstMetadataValue('dc.description.abstract')" class="item-list-abstract">
        <ds-truncatable-part [id]="dso.id" [minLines]="3"><span
            [innerHTML]="firstMetadataValue('dc.description.abstract')"></span>
        </ds-truncatable-part>
      </div> -->
        </ds-truncatable>
    </div>
    <div class="bottem-count-text mt-3 w-100">
        <ul>
            <li class="icon-text  border-right">
                <i class="fa fa-paperclip mr-3" aria-hidden="true"></i>
                <span>{{dso.bitstreamcount}}</span>
            </li>
            <li class="icon-text  border-right">
                <i class="fa fa-eye mr-3" aria-hidden="true"></i>
                <span>{{dso.viewcount}}</span>
            </li>
            <li class="icon-text  border-right">
                <i class="fa fa-star mr-3" aria-hidden="true"></i>
                <span>{{dso.ratinavg}}</span>
            </li>
            <!-- <li class="icon-text  ">
                <i class="fa fa-comment mr-3 font-wight-info" aria-hidden="true"></i>
                <span>{{dso.commentcount}}</span>
            </li> -->
        </ul>
    </div>
</div>

<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Citation</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">Ã—</span>
        </button>
    </div>
    <div class="modal-body">

        <div class="row">
            <div class="col-12">
                <!-- <p #userinput> {{cirtation}}</p> -->
                <div class="main-div" *ngFor="let item of cirtation">
                    <div class="key">{{item[0]}}</div>
                    <div class="value" #userInput>{{ item[1] }}<i class="fa fa-copy" ngbTooltip="Copy"
                            (click)="copyInputMessage(userInput)"></i></div>
                </div>
            </div>
            <div class="col-12 d-flex border-top mt-3 pt-3">
                <!-- <label class="form-check-label">Style</label> -->
                <select class="form-control mr-3" [(ngModel)]="cirteanselection">
                    <option value="RefMan" selected>RefMan</option>
                    <option value="EndNote">EndNote</option>
                    <option value="BibTeX">BibTeX</option>
                    <option value="xlsx">Export Excel(xlsx)</option>
                    <option value="csv">Export Excel(csv)</option>
                </select>
                <button class="float-right mr-3 btn btn-secondary " (click)="dowloadFile()">Download</button>
            </div>
        </div>

    </div>

</ng-template>

<!-- <div class="row">
    <div *ngIf="showThumbnails" class="col-3 col-md-2">
        <a *ngIf="linkType != linkTypes.None" [target]="(linkType == linkTypes.ExternalLink) ? '_blank' : '_self'"
           [attr.rel]="(linkType == linkTypes.ExternalLink) ? 'noopener noreferrer' : null"
           [routerLink]="[itemPageRoute]" class="dont-break-out">
            <ds-thumbnail [thumbnail]="dso?.thumbnail | async"
                          [defaultImage]="'assets/images/orgunit-placeholder.svg'"
                          [alt]="'thumbnail.orgunit.alt'"
                          [placeholder]="'thumbnail.orgunit.placeholder'">
            </ds-thumbnail>
        </a>
        <span *ngIf="linkType == linkTypes.None" class="dont-break-out">
            <ds-thumbnail [thumbnail]="dso?.thumbnail | async"
                          [defaultImage]="'assets/images/orgunit-placeholder.svg'"
                          [alt]="'thumbnail.orgunit.alt'"
                          [placeholder]="'thumbnail.orgunit.placeholder'">
            </ds-thumbnail>
        </span>
    </div>

    
    <div [ngClass]="showThumbnails ? 'col-9' : 'col-md-12'">
        <ds-themed-badges *ngIf="showLabel" [object]="dso" [context]="context"></ds-themed-badges>
        <ds-truncatable [id]="dso.id">
            <a *ngIf="linkType != linkTypes.None" [target]="(linkType == linkTypes.ExternalLink) ? '_blank' : '_self'"
               [attr.rel]="(linkType == linkTypes.ExternalLink) ? 'noopener noreferrer' : null"
               [routerLink]="[itemPageRoute]" class="lead"
               [innerHTML]="dsoTitle || ('orgunit.listelement.no-title' | translate)"></a>
            <span *ngIf="linkType == linkTypes.None"
                  class="lead"
                  [innerHTML]="dsoTitle || ('orgunit.listelement.no-title' | translate)"></span>
            <span class="text-muted">
      <span *ngIf="dso.allMetadata(['dc.description']).length > 0"
            class="item-list-org-unit-description">
            <ds-truncatable-part [id]="dso.id" [minLines]="3"><span
                    [innerHTML]="firstMetadataValue('dc.description')"></span>
            </ds-truncatable-part>
      </span>
    
  </span>
        </ds-truncatable>
    </div>
</div> -->
