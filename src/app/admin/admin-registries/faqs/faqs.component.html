<div class="container">
    <div class="col-md-12">
        <div class="form-group">
            <label>Question</label>
            <input #questionInput class="form-control" placeholder="Enter Question" [(ngModel)]="question" />
        </div>
        <div class="form-group">
            <label>Answer</label>
            <!-- <textarea class="form-control" row="10" placeholder="Enter Answer" [(ngModel)]="answer"></textarea> -->
            <angular-editor class="editor" [config]="editorConfig" [(ngModel)]="answer"></angular-editor>
        </div>
        <div class="col-12" *ngIf="!isEdit" style="margin-left: 31px;">
            <button class="float-right mr-3 btn btn-primary" (click)="submit()">Submit</button>
        </div>
        <div class="col-12" *ngIf="!!isEdit"  style="display: flex;justify-content: flex-end;margin-left: 31px;">
            <button type="button" class="btn btn-light btn-sm" (click)="cancel()" style="width: 80px;">Cancel</button>
            <button class="float-right mr-3 btn btn-primary" style="margin-left: 10px;" (click)="updateFAQ()">Update</button>
        </div>
    </div>
</div>

<div class="container added">
    
    <div class="col-lg-12">
        <div class="tab-listCard card">
            <div class="bg-primary card-header f-18 text-white">
                {{'home.recent-submissions.head' | translate}}
            </div>
            <div class="card-body overflow-hidden" cdkDropList #faqList="cdkDropList" [cdkDropListData]="(faq | async)?.payload?.page" (cdkDropListDropped)="drop($event)">
                <label>To arrange FAQs drag and drop.</label>
                <ds-pagination *ngIf="(faq | async)?.payload?.totalElements > 0" [paginationOptions]="pageConfig"
                    [pageInfoState]="(faq | async)?.payload" [collectionSize]="(faq | async)?.payload?.totalElements"
                    [hideGear]="true" [hidePagerWhenSinglePage]="true">
                    <div class="row">
                        <div class="col-1"></div>
                        <div class="col-3">
                            <label>Question</label>
                        </div>
                        <div class="col-7">
                            <label>Answer</label>
                        </div>
                        <div class="col-1">
                            <label>Action</label>
                        </div>
                    </div>
                    <div class="row" *ngFor="let item of (faq | async)?.payload?.page; let i = index" cdkDrag [cdkDragData]="item">
                        <div class="col-md-1" style="cursor: move;"><i class="fas fa-grip-vertical"></i></div>
                        <div class="col-md-3">
                            <label *ngIf="!item.isEdit">{{item.question}}</label>
                            <input class="form-control" [(ngModel)]="item.question" *ngIf="item.isEdit" />
                        </div>
                        <div class="col-md-7">
                            <label *ngIf="!item.isEdit" [innerHTML]="item.answers"></label>
                            <textarea class="form-control" [(ngModel)]="item.answers" rows="3" *ngIf="item.isEdit"></textarea>
                        </div>
                        <div class="col-md-1">
                            <div class="row" *ngIf="!item.isEdit">
                                <div class="col-md-1">
                                    <a style="cursor: pointer;"><i class="fa fa-pencil" aria-hidden="true"
                                            (click)="editMasterValue(item)"></i></a>
                                </div>
                                <div class="col-md-1">
                                    <a style="cursor: pointer;"><i class="fa fa-trash" aria-hidden="true"
                                            (click)="deleteMasterValue(item,content)"></i></a>
                                </div>
                            </div>
                            <div class="row" *ngIf="item.isEdit">
                                <div class="col-md-2">
                                    <button type="button" class="btn btn-success btn-sm"
                                        (click)="updateFAQ()">Update</button>
                                </div>
                                <div class="col-md-2" style="margin-left: 10px;">
                                    <button type="button" class="btn btn-light btn-sm" (click)="cancel()">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </ds-pagination>
            </div>
        </div>
    </div>
</div>

<ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title text-danger">Delete Master Value</h4>
        <button type="button" id="delete_close" class="close" aria-label="Close" (click)="d('cancel')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <p>Are you sure you want to delete this master value?</p>
    </div>
    <div class="modal-footer">
        <button type="button" id="delete_cancel" class="btn btn-secondary"
            (click)="c('cancel')">{{'submission.general.discard.confirm.cancel' | translate}}</button>
        <button type="button" id="delete_confirm" class="btn btn-danger"
            (click)="c('ok')">{{'submission.general.discard.confirm.submit' | translate}}</button>
    </div>
</ng-template>